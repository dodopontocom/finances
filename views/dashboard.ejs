<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
  <link rel="stylesheet" href="/css/style.css">
  <script>
    function alternar(tipo) {
      document.getElementById('contas-section').style.display = tipo === 'contas' ? 'block' : 'none';
      document.getElementById('entradas-section').style.display = tipo === 'entradas' ? 'block' : 'none';

      document.getElementById('btn-contas').classList.toggle('ativo', tipo === 'contas');
      document.getElementById('btn-entradas').classList.toggle('ativo', tipo === 'entradas');
    }

    window.onload = () => {
      alternar('contas'); // mostra contas por padrÃ£o
    };
  </script>
</head>
<body>
  <div class="container">

    <h1>Dashboard</h1>

    <!-- BotÃµes de alternÃ¢ncia -->
    <div class="alternar">
      <button id="btn-contas" onclick="alternar('contas')">ðŸ’³ Contas</button>
      <button id="btn-entradas" onclick="alternar('entradas')">ðŸ’° Entradas</button>
    </div>

    <!-- Cards resumo -->
    <div class="resumo">
      <div class="card-resumo receita">
        <h3>Receita</h3>
        <p>R$ <%= receitaTotal.toFixed(2) %></p>
      </div>
      <div class="card-resumo gastos">
        <h3>Gastos</h3>
        <p>R$ <%= gastosTotais.toFixed(2) %></p>
      </div>
      <div class="card-resumo saldo">
        <h3>Saldo Atual</h3>
        <p>R$ <%= (receitaTotal - gastosTotais).toFixed(2) %></p>
      </div>
    </div>

    <!-- SeÃ§Ã£o: Contas -->
    <div id="contas-section">
      <a href="/contas/nova" class="botao-novo">+ Nova Conta</a>

      <div class="filtros">
        <a href="/">Todas</a>
        <a href="/?status=pago">Pagas</a>
        <a href="/?status=pendente">Pendentes</a>
      </div>

      <% contas.forEach(conta => { %>
        <div class="card">
          <h3><%= conta.nome %></h3>
          <p>Valor: R$ <%= conta.valor.toFixed(2) %></p>
          <p>Vencimento: <%= new Date(conta.vencimento).toLocaleDateString() %></p>
          <p>Status: <%= conta.status %></p>
          <form action="/contas/<%= conta._id %>/status" method="POST">
            <button type="submit">
              Marcar como <%= conta.status === 'pendente' ? 'Pago' : 'Pendente' %>
            </button>
          </form>
        </div>
      <% }) %>
    </div>

    <!-- SeÃ§Ã£o: Entradas -->
    <div id="entradas-section" style="display: none;">
      <a href="/entradas/nova" class="botao-novo">+ Nova Entrada</a>

      <% entradas.forEach(entrada => { %>
        <div class="card">
          <h3><%= entrada.descricao %></h3>
          <p>Valor: R$ <%= entrada.valor.toFixed(2) %></p>
          <p>Data: <%= new Date(entrada.data).toLocaleDateString() %></p>
          <form action="/entradas/<%= entrada._id %>/deletar" method="POST">
            <button type="submit">Excluir</button>
          </form>
        </div>
      <% }) %>
    </div>

  </div>
</body>
</html>
